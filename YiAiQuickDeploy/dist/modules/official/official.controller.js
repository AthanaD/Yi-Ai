'use strict';function _0x5de3(_0x400a9f,_0x424401){const _0x46610=_0x4661();return _0x5de3=function(_0x5de32d,_0x4bfb6c){_0x5de32d=_0x5de32d-0x1ad;let _0x37784f=_0x46610[_0x5de32d];return _0x37784f;},_0x5de3(_0x400a9f,_0x424401);}const _0x1c386f=_0x5de3;(function(_0x2ccb68,_0xe615ba){const _0x3d5a05=_0x5de3,_0x2cc71d=_0x2ccb68();while(!![]){try{const _0xb78b83=parseInt(_0x3d5a05(0x1b7))/0x1*(parseInt(_0x3d5a05(0x201))/0x2)+-parseInt(_0x3d5a05(0x1ed))/0x3+parseInt(_0x3d5a05(0x1e1))/0x4+-parseInt(_0x3d5a05(0x1c3))/0x5+parseInt(_0x3d5a05(0x1d9))/0x6+parseInt(_0x3d5a05(0x1e7))/0x7*(parseInt(_0x3d5a05(0x1c0))/0x8)+-parseInt(_0x3d5a05(0x1cd))/0x9;if(_0xb78b83===_0xe615ba)break;else _0x2cc71d['push'](_0x2cc71d['shift']());}catch(_0x3ecdbf){_0x2cc71d['push'](_0x2cc71d['shift']());}}}(_0x4661,0x68361));var __decorate=this&&this[_0x1c386f(0x1f1)]||function(_0x21a260,_0x4b95d6,_0x4906ce,_0x20859f){const _0x32273a=_0x1c386f;var _0x4e9d8d=arguments[_0x32273a(0x207)],_0x3c1477=_0x4e9d8d<0x3?_0x4b95d6:_0x20859f===null?_0x20859f=Object[_0x32273a(0x1ff)](_0x4b95d6,_0x4906ce):_0x20859f,_0x2452b3;if(typeof Reflect==='object'&&typeof Reflect[_0x32273a(0x1e8)]===_0x32273a(0x1b1))_0x3c1477=Reflect[_0x32273a(0x1e8)](_0x21a260,_0x4b95d6,_0x4906ce,_0x20859f);else{for(var _0x375d8e=_0x21a260[_0x32273a(0x207)]-0x1;_0x375d8e>=0x0;_0x375d8e--)if(_0x2452b3=_0x21a260[_0x375d8e])_0x3c1477=(_0x4e9d8d<0x3?_0x2452b3(_0x3c1477):_0x4e9d8d>0x3?_0x2452b3(_0x4b95d6,_0x4906ce,_0x3c1477):_0x2452b3(_0x4b95d6,_0x4906ce))||_0x3c1477;}return _0x4e9d8d>0x3&&_0x3c1477&&Object['defineProperty'](_0x4b95d6,_0x4906ce,_0x3c1477),_0x3c1477;},__metadata=this&&this['__metadata']||function(_0x19d773,_0x285847){const _0x4ceee7=_0x1c386f;if(typeof Reflect===_0x4ceee7(0x1bf)&&typeof Reflect[_0x4ceee7(0x1b3)]===_0x4ceee7(0x1b1))return Reflect[_0x4ceee7(0x1b3)](_0x19d773,_0x285847);},__param=this&&this[_0x1c386f(0x1b6)]||function(_0xb90769,_0x5d06e0){return function(_0x44e2ac,_0x1d4a72){_0x5d06e0(_0x44e2ac,_0x1d4a72,_0xb90769);};};function _0x4661(){const _0x15a4f8=['qrscene_','status','5595919FknlVZ','decorate','获取二维码','prototype','code','design:returntype','1568712CogWfb','./dto/getQrSceneStr.dto','includes','OfficialController','__decorate','getQRCode','msgtype','scanBindWx','genXmlMsg','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','公众号通知接口POST','log','@nestjs/swagger','content','eventkey','xml:\x20','bindWxBySceneStr','Get','getOwnPropertyDescriptor','getQRSceneStr','26WBOsmk','UseGuards','公众号通知接口GET','@nestjs/common','genXmlMsgByConfig','unsubscribe','length','split','ApiOperation','subscribe','GetQrSceneStrDto','nonce','design:type','getQRCodeTicket','Body','ISDEV','scan','ApiTags','officialBindAccountText','function','get\x20通知>>>','metadata','loginBySceneStr','VIEW','__param','18413tFmDUw','fromusername','Req','officialService','url','verify','公众号静默登录','send','object','8kFUlzn','official','Res','703515mOWkFn','扫码登录轮询查询','__esModule','../../common/auth/jwtAuth.guard','timestamp','获取注册配置','获取登录二维码sceneStr','notify','defineProperty','sceneStr','12575988vLsxog','getQRSceneStrByBind','OfficialService','Query','notifyPost','获取绑定二维码的sceneStr','TRUE','GetQrCodeDto','officialSubscribeText','Post','design:paramtypes','sceneStr:\x20','4993818KbRmQW','Controller','JwtAuthGuard','officialScanLoginText','./dto/getQrCode.dto','echostr','getRedirectUrl','event','2466796mWrsVj','getJsapiTicket','loginByCode','扫码绑定轮询查询'];_0x4661=function(){return _0x15a4f8;};return _0x4661();}Object[_0x1c386f(0x1cb)](exports,_0x1c386f(0x1c5),{'value':!![]}),exports[_0x1c386f(0x1f0)]=void 0x0;const common_1=require(_0x1c386f(0x204)),swagger_1=require(_0x1c386f(0x1f9)),jwtAuth_guard_1=require(_0x1c386f(0x1c6)),official_service_1=require('./official.service'),getQrCode_dto_1=require(_0x1c386f(0x1dd)),getQrSceneStr_dto_1=require(_0x1c386f(0x1ee));let OfficialController=class OfficialController{constructor(_0x6f29be){const _0x5e3df3=_0x1c386f;this[_0x5e3df3(0x1ba)]=_0x6f29be;}async['notify'](_0x36c0ef,_0x2440b0,_0x2639f0){const _0x2d75fd=_0x1c386f;console[_0x2d75fd(0x1f8)](_0x2d75fd(0x1b2),_0x2440b0,_0x2639f0);const _0x417fe4=await this[_0x2d75fd(0x1ba)][_0x2d75fd(0x1bc)](_0x2440b0['signature'],_0x2440b0[_0x2d75fd(0x20c)],_0x2440b0[_0x2d75fd(0x1c7)]);return _0x417fe4?_0x2440b0[_0x2d75fd(0x1de)]:'';}async[_0x1c386f(0x1d1)](_0x3fc693,_0x286950,_0xd7e1c1,_0x2ad090){const _0x1ddfea=_0x1c386f,{xml:_0x186e2c}=_0xd7e1c1;console[_0x1ddfea(0x1f8)](_0x1ddfea(0x1fc),_0x186e2c);if(_0x186e2c[_0x1ddfea(0x1f3)][0x0]==_0x1ddfea(0x1e0)){if(_0x186e2c[_0x1ddfea(0x1e0)][0x0]==_0x1ddfea(0x1b5)||_0x186e2c[_0x1ddfea(0x1e0)][0x0]=='CLICK')return _0x2ad090[_0x1ddfea(0x1e6)](0xc8)[_0x1ddfea(0x1be)]('');if(_0x186e2c['event'][0x0]=='SCAN'){console[_0x1ddfea(0x1f8)]('扫码');const _0x239380=_0x186e2c['eventkey'][0x0];if(_0x239380[_0x1ddfea(0x1ef)]('/')){this[_0x1ddfea(0x1ba)]['scanBindWx'](_0x186e2c[_0x1ddfea(0x1b8)][0x0],_0x239380);const _0x4d0cda=await this[_0x1ddfea(0x1ba)][_0x1ddfea(0x205)](_0x186e2c,_0x1ddfea(0x1b0));return _0x2ad090[_0x1ddfea(0x1e6)](0xc8)[_0x1ddfea(0x1be)](_0x4d0cda);}this[_0x1ddfea(0x1ba)][_0x1ddfea(0x1ae)](_0x186e2c['fromusername'][0x0],_0x239380);const _0x449bfb=await this[_0x1ddfea(0x1ba)][_0x1ddfea(0x205)](_0x186e2c,_0x1ddfea(0x1dc));return _0x2ad090[_0x1ddfea(0x1e6)](0xc8)[_0x1ddfea(0x1be)](_0x449bfb);}if(_0x186e2c['event'][0x0]==_0x1ddfea(0x20a)){console[_0x1ddfea(0x1f8)]('订阅',_0x186e2c[_0x1ddfea(0x1fb)][0x0]);const _0x1f8043=_0x186e2c[_0x1ddfea(0x1fb)][0x0][_0x1ddfea(0x208)](_0x1ddfea(0x1e5))[0x1];console[_0x1ddfea(0x1f8)](_0x1ddfea(0x1d8),_0x1f8043);if(!_0x1f8043){const _0x589f4f=await this[_0x1ddfea(0x1ba)]['genXmlMsgByConfig'](_0x186e2c,'officialSubscribeText');return _0x2ad090[_0x1ddfea(0x1e6)](0xc8)['send'](_0x589f4f);}if(_0x1f8043['includes']('/')){this[_0x1ddfea(0x1ba)][_0x1ddfea(0x1f4)](_0x186e2c['fromusername'][0x0],_0x1f8043);const _0x4c84d0=await this['officialService'][_0x1ddfea(0x205)](_0x186e2c,_0x1ddfea(0x1b0));return _0x2ad090[_0x1ddfea(0x1e6)](0xc8)[_0x1ddfea(0x1be)](_0x4c84d0);}this[_0x1ddfea(0x1ba)]['scan'](_0x186e2c[_0x1ddfea(0x1b8)][0x0],_0x1f8043);const _0x4d6215=await this[_0x1ddfea(0x1ba)]['genXmlMsgByConfig'](_0x186e2c,_0x1ddfea(0x1d5));return _0x2ad090['status'](0xc8)['send'](_0x4d6215);}if(_0x186e2c[_0x1ddfea(0x1e0)][0x0]==_0x1ddfea(0x206))return _0x2ad090[_0x1ddfea(0x1e6)](0xc8)[_0x1ddfea(0x1be)]('');}if(_0x186e2c[_0x1ddfea(0x1f3)][0x0]=='text'){const _0x103a58=await this[_0x1ddfea(0x1ba)]['aotoPlay'](_0x186e2c[_0x1ddfea(0x1fa)][0x0]),_0x280d15=await this[_0x1ddfea(0x1ba)][_0x1ddfea(0x1f5)](_0x186e2c,_0x103a58);return _0x2ad090[_0x1ddfea(0x1e6)](0xc8)[_0x1ddfea(0x1be)](_0x280d15);}return'success';}async[_0x1c386f(0x200)](_0x19a815){const _0x18a45b=_0x1c386f;return this[_0x18a45b(0x1ba)][_0x18a45b(0x200)](_0x19a815);}async['getQRSceneStrByBind'](_0x521a49){const _0x3a2e99=_0x1c386f;return this[_0x3a2e99(0x1ba)]['getQRSceneStrByBind'](_0x521a49);}async[_0x1c386f(0x1f2)](_0x43db09){const _0x419b8f=_0x1c386f;if(process['env'][_0x419b8f(0x1ad)]===_0x419b8f(0x1d3))return'';const _0x5d5832=await this['officialService'][_0x419b8f(0x20e)](_0x43db09[_0x419b8f(0x1cc)]);return _0x419b8f(0x1f6)+encodeURIComponent(_0x5d5832);}async[_0x1c386f(0x1b4)](_0x1cacc9,_0x51b31d){const _0x2fe521=_0x1c386f;return this[_0x2fe521(0x1ba)][_0x2fe521(0x1b4)](_0x1cacc9,_0x51b31d[_0x2fe521(0x1cc)]);}async[_0x1c386f(0x1fd)](_0x4fb0e0,_0x147602){const _0x7f305b=_0x1c386f;return this[_0x7f305b(0x1ba)][_0x7f305b(0x1fd)](_0x4fb0e0,_0x147602[_0x7f305b(0x1cc)]);}async['getRedirectUrl'](_0x134d13){const _0x30c6e5=_0x1c386f;return this['officialService'][_0x30c6e5(0x1df)](_0x134d13[_0x30c6e5(0x1bb)]);}async[_0x1c386f(0x1e2)](_0x1d9cba){const _0x473c1e=_0x1c386f;return this[_0x473c1e(0x1ba)]['getJsapiTicket'](_0x1d9cba['url']);}async[_0x1c386f(0x1e3)](_0x57b722,_0x14da16){const _0x4f2c1f=_0x1c386f;return this['officialService'][_0x4f2c1f(0x1e3)](_0x57b722,_0x14da16[_0x4f2c1f(0x1eb)]);}};__decorate([(0x0,common_1[_0x1c386f(0x1fe)])(_0x1c386f(0x1ca)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x203)}),__param(0x0,(0x0,common_1[_0x1c386f(0x1b9)])()),__param(0x1,(0x0,common_1[_0x1c386f(0x1d0)])()),__param(0x2,(0x0,common_1['Body'])()),__metadata(_0x1c386f(0x20d),Function),__metadata(_0x1c386f(0x1d7),[Object,Object,Object]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1ca),null),__decorate([(0x0,common_1[_0x1c386f(0x1d6)])(_0x1c386f(0x1ca)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1f7)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x1c386f(0x1d0)])()),__param(0x2,(0x0,common_1[_0x1c386f(0x20f)])()),__param(0x3,(0x0,common_1[_0x1c386f(0x1c2)])()),__metadata(_0x1c386f(0x20d),Function),__metadata('design:paramtypes',[Object,Object,Object,Object]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1d1),null),__decorate([(0x0,common_1[_0x1c386f(0x1d6)])(_0x1c386f(0x200)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1c9)}),__param(0x0,(0x0,common_1[_0x1c386f(0x20f)])()),__metadata(_0x1c386f(0x20d),Function),__metadata(_0x1c386f(0x1d7),[getQrSceneStr_dto_1[_0x1c386f(0x20b)]]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController[_0x1c386f(0x1ea)],'getQRSceneStr',null),__decorate([(0x0,common_1['Post'])(_0x1c386f(0x1ce)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1d2)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x1c386f(0x1db)]),__param(0x0,(0x0,common_1[_0x1c386f(0x1b9)])()),__metadata(_0x1c386f(0x20d),Function),__metadata(_0x1c386f(0x1d7),[Object]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1ce),null),__decorate([(0x0,common_1[_0x1c386f(0x1fe)])(_0x1c386f(0x1f2)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1e9)}),__param(0x0,(0x0,common_1[_0x1c386f(0x1d0)])()),__metadata(_0x1c386f(0x20d),Function),__metadata(_0x1c386f(0x1d7),[getQrCode_dto_1[_0x1c386f(0x1d4)]]),__metadata('design:returntype',Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1f2),null),__decorate([(0x0,common_1[_0x1c386f(0x1d6)])(_0x1c386f(0x1b4)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1c4)}),__param(0x0,(0x0,common_1[_0x1c386f(0x1b9)])()),__param(0x1,(0x0,common_1[_0x1c386f(0x20f)])()),__metadata(_0x1c386f(0x20d),Function),__metadata(_0x1c386f(0x1d7),[Object,getQrCode_dto_1[_0x1c386f(0x1d4)]]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1b4),null),__decorate([(0x0,common_1['Post'])(_0x1c386f(0x1fd)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1e4)}),(0x0,common_1[_0x1c386f(0x202)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1[_0x1c386f(0x1b9)])()),__param(0x1,(0x0,common_1[_0x1c386f(0x20f)])()),__metadata(_0x1c386f(0x20d),Function),__metadata(_0x1c386f(0x1d7),[Object,getQrCode_dto_1[_0x1c386f(0x1d4)]]),__metadata('design:returntype',Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1fd),null),__decorate([(0x0,common_1[_0x1c386f(0x1d6)])(_0x1c386f(0x1df)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':'获取登录跳转地址'}),__param(0x0,(0x0,common_1[_0x1c386f(0x20f)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1df),null),__decorate([(0x0,common_1[_0x1c386f(0x1d6)])(_0x1c386f(0x1e2)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1c8)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x1c386f(0x20d),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController['prototype'],_0x1c386f(0x1e2),null),__decorate([(0x0,common_1['Post'])(_0x1c386f(0x1e3)),(0x0,swagger_1[_0x1c386f(0x209)])({'summary':_0x1c386f(0x1bd)}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x1c386f(0x20f)])()),__metadata(_0x1c386f(0x20d),Function),__metadata('design:paramtypes',[Object,Object]),__metadata(_0x1c386f(0x1ec),Promise)],OfficialController[_0x1c386f(0x1ea)],_0x1c386f(0x1e3),null),OfficialController=__decorate([(0x0,swagger_1[_0x1c386f(0x1af)])('official'),(0x0,common_1[_0x1c386f(0x1da)])(_0x1c386f(0x1c1)),__metadata('design:paramtypes',[official_service_1[_0x1c386f(0x1cf)]])],OfficialController),exports[_0x1c386f(0x1f0)]=OfficialController;