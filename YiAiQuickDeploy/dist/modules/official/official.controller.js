'use strict';const _0x362f25=_0x40a9;(function(_0x203486,_0x46910b){const _0x4d3095=_0x40a9,_0x333412=_0x203486();while(!![]){try{const _0x37309b=-parseInt(_0x4d3095(0x151))/0x1+-parseInt(_0x4d3095(0x12d))/0x2*(parseInt(_0x4d3095(0x14f))/0x3)+-parseInt(_0x4d3095(0x117))/0x4+-parseInt(_0x4d3095(0x133))/0x5*(-parseInt(_0x4d3095(0x124))/0x6)+parseInt(_0x4d3095(0x120))/0x7*(parseInt(_0x4d3095(0x122))/0x8)+-parseInt(_0x4d3095(0x131))/0x9+parseInt(_0x4d3095(0x145))/0xa*(parseInt(_0x4d3095(0x14c))/0xb);if(_0x37309b===_0x46910b)break;else _0x333412['push'](_0x333412['shift']());}catch(_0xf18fd1){_0x333412['push'](_0x333412['shift']());}}}(_0xfcf8,0x60949));function _0x40a9(_0x3bd8f1,_0x59178c){const _0xfcf8b3=_0xfcf8();return _0x40a9=function(_0x40a9d7,_0x559c5e){_0x40a9d7=_0x40a9d7-0xf7;let _0x4a3ed6=_0xfcf8b3[_0x40a9d7];return _0x4a3ed6;},_0x40a9(_0x3bd8f1,_0x59178c);}var __decorate=this&&this['__decorate']||function(_0x360cfa,_0x37449f,_0x41cb3c,_0x2d9517){const _0x358c6c=_0x40a9;var _0x3158d7=arguments[_0x358c6c(0x10f)],_0x1415b4=_0x3158d7<0x3?_0x37449f:_0x2d9517===null?_0x2d9517=Object['getOwnPropertyDescriptor'](_0x37449f,_0x41cb3c):_0x2d9517,_0x39316b;if(typeof Reflect===_0x358c6c(0x13a)&&typeof Reflect[_0x358c6c(0x13e)]===_0x358c6c(0x126))_0x1415b4=Reflect[_0x358c6c(0x13e)](_0x360cfa,_0x37449f,_0x41cb3c,_0x2d9517);else{for(var _0x432095=_0x360cfa[_0x358c6c(0x10f)]-0x1;_0x432095>=0x0;_0x432095--)if(_0x39316b=_0x360cfa[_0x432095])_0x1415b4=(_0x3158d7<0x3?_0x39316b(_0x1415b4):_0x3158d7>0x3?_0x39316b(_0x37449f,_0x41cb3c,_0x1415b4):_0x39316b(_0x37449f,_0x41cb3c))||_0x1415b4;}return _0x3158d7>0x3&&_0x1415b4&&Object['defineProperty'](_0x37449f,_0x41cb3c,_0x1415b4),_0x1415b4;},__metadata=this&&this[_0x362f25(0x12b)]||function(_0x896d85,_0x5e891d){const _0xa34c17=_0x362f25;if(typeof Reflect==='object'&&typeof Reflect[_0xa34c17(0x152)]===_0xa34c17(0x126))return Reflect['metadata'](_0x896d85,_0x5e891d);},__param=this&&this[_0x362f25(0x118)]||function(_0x4d7fa2,_0x3d949a){return function(_0x281ee2,_0x34189a){_0x3d949a(_0x281ee2,_0x34189a,_0x4d7fa2);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['OfficialController']=void 0x0;function _0xfcf8(){const _0x454341=['url','CLICK','send','Post','1079812VtuOLv','__param','bindWxBySceneStr','log','公众号静默登录','../../common/auth/jwtAuth.guard','GetQrCodeDto','JwtAuthGuard','sceneStr','7iXXpiQ','Controller','3647224LgStGl','echostr','3172056JGotWG','signature','function','OfficialController','eventkey','nonce','qrscene_','__metadata','get\x20通知>>>','862766PgMZEj','scan','@nestjs/common','verify','4053141NozMkX','https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=','5QpjcZe','officialBindAccountText','design:returntype','includes','getQRSceneStr','VIEW','获取登录跳转地址','object','success','status','content','decorate','./dto/getQrCode.dto','getJsapiTicket','getQRSceneStrByBind','officialService','Get','timestamp','10txwTLx','getRedirectUrl','公众号通知接口POST','officialSubscribeText','event','genXmlMsg','UseGuards','10120627ZiUmQj','design:type','split','3yAtVWh','Query','357358UDwrSz','metadata','notify','ApiOperation','Res','获取绑定二维码的sceneStr','ISDEV','TRUE','Req','fromusername','official','subscribe','@nestjs/swagger','loginByCode','scanBindWx','获取注册配置','getQRCode','扫码登录轮询查询','Body','loginBySceneStr','./dto/getQrSceneStr.dto','GetQrSceneStrDto','design:paramtypes','prototype','./official.service','text','msgtype','length','aotoPlay','code','genXmlMsgByConfig'];_0xfcf8=function(){return _0x454341;};return _0xfcf8();}const common_1=require(_0x362f25(0x12f)),swagger_1=require(_0x362f25(0x100)),jwtAuth_guard_1=require(_0x362f25(0x11c)),official_service_1=require(_0x362f25(0x10c)),getQrCode_dto_1=require(_0x362f25(0x13f)),getQrSceneStr_dto_1=require(_0x362f25(0x108));let OfficialController=class OfficialController{constructor(_0x4ed909){this['officialService']=_0x4ed909;}async[_0x362f25(0x153)](_0x32f168,_0x288780,_0x66681c){const _0xab61fb=_0x362f25;console[_0xab61fb(0x11a)](_0xab61fb(0x12c),_0x288780,_0x66681c);const _0x19c289=await this[_0xab61fb(0x142)][_0xab61fb(0x130)](_0x288780[_0xab61fb(0x125)],_0x288780[_0xab61fb(0x129)],_0x288780[_0xab61fb(0x144)]);return _0x19c289?_0x288780[_0xab61fb(0x123)]:'';}async['notifyPost'](_0x454069,_0x14a2a5,_0x5f2025,_0x1de10a){const _0x382d70=_0x362f25,{xml:_0x58b3ba}=_0x5f2025;console[_0x382d70(0x11a)]('xml:\x20',_0x58b3ba);if(_0x58b3ba[_0x382d70(0x10e)][0x0]=='event'){if(_0x58b3ba[_0x382d70(0x149)][0x0]==_0x382d70(0x138)||_0x58b3ba[_0x382d70(0x149)][0x0]==_0x382d70(0x114))return _0x1de10a['status'](0xc8)[_0x382d70(0x115)]('');if(_0x58b3ba[_0x382d70(0x149)][0x0]=='SCAN'){console[_0x382d70(0x11a)]('扫码');const _0x5c5494=_0x58b3ba[_0x382d70(0x128)][0x0];if(_0x5c5494['includes']('/')){this[_0x382d70(0x142)][_0x382d70(0x102)](_0x58b3ba[_0x382d70(0xfd)][0x0],_0x5c5494);const _0x2eb85b=await this[_0x382d70(0x142)]['genXmlMsgByConfig'](_0x58b3ba,'officialBindAccountText');return _0x1de10a[_0x382d70(0x13c)](0xc8)[_0x382d70(0x115)](_0x2eb85b);}this[_0x382d70(0x142)][_0x382d70(0x12e)](_0x58b3ba[_0x382d70(0xfd)][0x0],_0x5c5494);const _0x103976=await this[_0x382d70(0x142)][_0x382d70(0x112)](_0x58b3ba,'officialScanLoginText');return _0x1de10a[_0x382d70(0x13c)](0xc8)['send'](_0x103976);}if(_0x58b3ba[_0x382d70(0x149)][0x0]==_0x382d70(0xff)){console[_0x382d70(0x11a)]('订阅',_0x58b3ba[_0x382d70(0x128)][0x0]);const _0x1a2dc7=_0x58b3ba['eventkey'][0x0][_0x382d70(0x14e)](_0x382d70(0x12a))[0x1];console[_0x382d70(0x11a)]('sceneStr:\x20',_0x1a2dc7);if(!_0x1a2dc7){const _0x560d4b=await this[_0x382d70(0x142)]['genXmlMsgByConfig'](_0x58b3ba,_0x382d70(0x148));return _0x1de10a['status'](0xc8)[_0x382d70(0x115)](_0x560d4b);}if(_0x1a2dc7[_0x382d70(0x136)]('/')){this[_0x382d70(0x142)]['scanBindWx'](_0x58b3ba['fromusername'][0x0],_0x1a2dc7);const _0xb198a0=await this[_0x382d70(0x142)][_0x382d70(0x112)](_0x58b3ba,_0x382d70(0x134));return _0x1de10a[_0x382d70(0x13c)](0xc8)['send'](_0xb198a0);}this[_0x382d70(0x142)][_0x382d70(0x12e)](_0x58b3ba[_0x382d70(0xfd)][0x0],_0x1a2dc7);const _0x34d15d=await this[_0x382d70(0x142)]['genXmlMsgByConfig'](_0x58b3ba,_0x382d70(0x148));return _0x1de10a[_0x382d70(0x13c)](0xc8)[_0x382d70(0x115)](_0x34d15d);}if(_0x58b3ba[_0x382d70(0x149)][0x0]=='unsubscribe')return _0x1de10a[_0x382d70(0x13c)](0xc8)[_0x382d70(0x115)]('');}if(_0x58b3ba[_0x382d70(0x10e)][0x0]==_0x382d70(0x10d)){const _0x384fd5=await this[_0x382d70(0x142)][_0x382d70(0x110)](_0x58b3ba[_0x382d70(0x13d)][0x0]),_0x57bfd5=await this[_0x382d70(0x142)][_0x382d70(0x14a)](_0x58b3ba,_0x384fd5);return _0x1de10a[_0x382d70(0x13c)](0xc8)[_0x382d70(0x115)](_0x57bfd5);}return _0x382d70(0x13b);}async[_0x362f25(0x137)](_0x1a6157){const _0xdfe20a=_0x362f25;return this['officialService'][_0xdfe20a(0x137)](_0x1a6157);}async[_0x362f25(0x141)](_0x1a173a){const _0x3ee389=_0x362f25;return this[_0x3ee389(0x142)]['getQRSceneStrByBind'](_0x1a173a);}async[_0x362f25(0x104)](_0x480268){const _0x572e6a=_0x362f25;if(process['env'][_0x572e6a(0xfa)]===_0x572e6a(0xfb))return'';const _0x748e7=await this[_0x572e6a(0x142)]['getQRCodeTicket'](_0x480268[_0x572e6a(0x11f)]);return _0x572e6a(0x132)+encodeURIComponent(_0x748e7);}async[_0x362f25(0x107)](_0x4fbbf6,_0x38075a){const _0x4c9a92=_0x362f25;return this['officialService'][_0x4c9a92(0x107)](_0x4fbbf6,_0x38075a['sceneStr']);}async[_0x362f25(0x119)](_0x2a44f9,_0x491cb4){const _0x3f72ad=_0x362f25;return this[_0x3f72ad(0x142)][_0x3f72ad(0x119)](_0x2a44f9,_0x491cb4[_0x3f72ad(0x11f)]);}async[_0x362f25(0x146)](_0x215230){const _0x1625a3=_0x362f25;return this[_0x1625a3(0x142)][_0x1625a3(0x146)](_0x215230[_0x1625a3(0x113)]);}async[_0x362f25(0x140)](_0x174b71){const _0x167859=_0x362f25;return this[_0x167859(0x142)]['getJsapiTicket'](_0x174b71[_0x167859(0x113)]);}async[_0x362f25(0x101)](_0x465b35,_0x272f6a){const _0x36f0f3=_0x362f25;return this[_0x36f0f3(0x142)][_0x36f0f3(0x101)](_0x465b35,_0x272f6a[_0x36f0f3(0x111)]);}};__decorate([(0x0,common_1[_0x362f25(0x143)])(_0x362f25(0x153)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':'公众号通知接口GET'}),__param(0x0,(0x0,common_1['Req'])()),__param(0x1,(0x0,common_1[_0x362f25(0x150)])()),__param(0x2,(0x0,common_1[_0x362f25(0x106)])()),__metadata(_0x362f25(0x14d),Function),__metadata(_0x362f25(0x10a),[Object,Object,Object]),__metadata(_0x362f25(0x135),Promise)],OfficialController[_0x362f25(0x10b)],'notify',null),__decorate([(0x0,common_1['Post'])(_0x362f25(0x153)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':_0x362f25(0x147)}),__param(0x0,(0x0,common_1[_0x362f25(0xfc)])()),__param(0x1,(0x0,common_1['Query'])()),__param(0x2,(0x0,common_1[_0x362f25(0x106)])()),__param(0x3,(0x0,common_1[_0x362f25(0xf8)])()),__metadata(_0x362f25(0x14d),Function),__metadata(_0x362f25(0x10a),[Object,Object,Object,Object]),__metadata(_0x362f25(0x135),Promise)],OfficialController['prototype'],'notifyPost',null),__decorate([(0x0,common_1['Post'])(_0x362f25(0x137)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':'获取登录二维码sceneStr'}),__param(0x0,(0x0,common_1[_0x362f25(0x106)])()),__metadata(_0x362f25(0x14d),Function),__metadata('design:paramtypes',[getQrSceneStr_dto_1[_0x362f25(0x109)]]),__metadata(_0x362f25(0x135),Promise)],OfficialController['prototype'],_0x362f25(0x137),null),__decorate([(0x0,common_1[_0x362f25(0x116)])('getQRSceneStrByBind'),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':_0x362f25(0xf9)}),(0x0,common_1[_0x362f25(0x14b)])(jwtAuth_guard_1['JwtAuthGuard']),__param(0x0,(0x0,common_1['Req'])()),__metadata('design:type',Function),__metadata(_0x362f25(0x10a),[Object]),__metadata(_0x362f25(0x135),Promise)],OfficialController[_0x362f25(0x10b)],_0x362f25(0x141),null),__decorate([(0x0,common_1[_0x362f25(0x143)])(_0x362f25(0x104)),(0x0,swagger_1['ApiOperation'])({'summary':'获取二维码'}),__param(0x0,(0x0,common_1[_0x362f25(0x150)])()),__metadata('design:type',Function),__metadata(_0x362f25(0x10a),[getQrCode_dto_1['GetQrCodeDto']]),__metadata('design:returntype',Promise)],OfficialController[_0x362f25(0x10b)],_0x362f25(0x104),null),__decorate([(0x0,common_1[_0x362f25(0x116)])(_0x362f25(0x107)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':_0x362f25(0x105)}),__param(0x0,(0x0,common_1[_0x362f25(0xfc)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(_0x362f25(0x14d),Function),__metadata('design:paramtypes',[Object,getQrCode_dto_1[_0x362f25(0x11d)]]),__metadata(_0x362f25(0x135),Promise)],OfficialController['prototype'],_0x362f25(0x107),null),__decorate([(0x0,common_1[_0x362f25(0x116)])(_0x362f25(0x119)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':'扫码绑定轮询查询'}),(0x0,common_1[_0x362f25(0x14b)])(jwtAuth_guard_1[_0x362f25(0x11e)]),__param(0x0,(0x0,common_1[_0x362f25(0xfc)])()),__param(0x1,(0x0,common_1[_0x362f25(0x106)])()),__metadata('design:type',Function),__metadata(_0x362f25(0x10a),[Object,getQrCode_dto_1[_0x362f25(0x11d)]]),__metadata(_0x362f25(0x135),Promise)],OfficialController[_0x362f25(0x10b)],'bindWxBySceneStr',null),__decorate([(0x0,common_1[_0x362f25(0x116)])(_0x362f25(0x146)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':_0x362f25(0x139)}),__param(0x0,(0x0,common_1[_0x362f25(0x106)])()),__metadata('design:type',Function),__metadata(_0x362f25(0x10a),[Object]),__metadata(_0x362f25(0x135),Promise)],OfficialController[_0x362f25(0x10b)],_0x362f25(0x146),null),__decorate([(0x0,common_1['Post'])(_0x362f25(0x140)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':_0x362f25(0x103)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x362f25(0x14d),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x362f25(0x135),Promise)],OfficialController[_0x362f25(0x10b)],_0x362f25(0x140),null),__decorate([(0x0,common_1[_0x362f25(0x116)])(_0x362f25(0x101)),(0x0,swagger_1[_0x362f25(0xf7)])({'summary':_0x362f25(0x11b)}),__param(0x0,(0x0,common_1[_0x362f25(0xfc)])()),__param(0x1,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(_0x362f25(0x10a),[Object,Object]),__metadata(_0x362f25(0x135),Promise)],OfficialController[_0x362f25(0x10b)],'loginByCode',null),OfficialController=__decorate([(0x0,swagger_1['ApiTags'])(_0x362f25(0xfe)),(0x0,common_1[_0x362f25(0x121)])(_0x362f25(0xfe)),__metadata(_0x362f25(0x10a),[official_service_1['OfficialService']])],OfficialController),exports[_0x362f25(0x127)]=OfficialController;