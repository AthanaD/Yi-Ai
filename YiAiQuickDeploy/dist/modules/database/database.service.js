'use strict';const _0x11ba66=_0x2a14;(function(_0x1aaa6d,_0x356aac){const _0x41e999=_0x2a14,_0x460b17=_0x1aaa6d();while(!![]){try{const _0x1c4275=-parseInt(_0x41e999(0x187))/0x1+-parseInt(_0x41e999(0x17d))/0x2*(parseInt(_0x41e999(0x188))/0x3)+-parseInt(_0x41e999(0x1d6))/0x4*(parseInt(_0x41e999(0x1ad))/0x5)+-parseInt(_0x41e999(0x1a9))/0x6+-parseInt(_0x41e999(0x18d))/0x7*(parseInt(_0x41e999(0x1c0))/0x8)+parseInt(_0x41e999(0x193))/0x9+-parseInt(_0x41e999(0x1a8))/0xa*(-parseInt(_0x41e999(0x1c4))/0xb);if(_0x1c4275===_0x356aac)break;else _0x460b17['push'](_0x460b17['shift']());}catch(_0x18120c){_0x460b17['push'](_0x460b17['shift']());}}}(_0x33e8,0xa2bbe));var __decorate=this&&this[_0x11ba66(0x1a6)]||function(_0x405448,_0x15ae80,_0x25ffc1,_0x370d5a){const _0x59382e=_0x11ba66;var _0x2f3000=arguments[_0x59382e(0x181)],_0x4ee869=_0x2f3000<0x3?_0x15ae80:_0x370d5a===null?_0x370d5a=Object['getOwnPropertyDescriptor'](_0x15ae80,_0x25ffc1):_0x370d5a,_0x2e7963;if(typeof Reflect===_0x59382e(0x194)&&typeof Reflect[_0x59382e(0x183)]===_0x59382e(0x1cc))_0x4ee869=Reflect[_0x59382e(0x183)](_0x405448,_0x15ae80,_0x25ffc1,_0x370d5a);else{for(var _0x2cf599=_0x405448[_0x59382e(0x181)]-0x1;_0x2cf599>=0x0;_0x2cf599--)if(_0x2e7963=_0x405448[_0x2cf599])_0x4ee869=(_0x2f3000<0x3?_0x2e7963(_0x4ee869):_0x2f3000>0x3?_0x2e7963(_0x15ae80,_0x25ffc1,_0x4ee869):_0x2e7963(_0x15ae80,_0x25ffc1))||_0x4ee869;}return _0x2f3000>0x3&&_0x4ee869&&Object[_0x59382e(0x18c)](_0x15ae80,_0x25ffc1,_0x4ee869),_0x4ee869;},__metadata=this&&this[_0x11ba66(0x1b6)]||function(_0x367cc7,_0x37a455){const _0x1bf42d=_0x11ba66;if(typeof Reflect===_0x1bf42d(0x194)&&typeof Reflect[_0x1bf42d(0x1aa)]===_0x1bf42d(0x1cc))return Reflect[_0x1bf42d(0x1aa)](_0x367cc7,_0x37a455);};Object[_0x11ba66(0x18c)](exports,_0x11ba66(0x192),{'value':!![]}),exports[_0x11ba66(0x1c5)]=void 0x0;function _0x33e8(){const _0x211316=['openaiBaseUrl','@nestjs/common','inviteGiveSendModel4Count','length','Yi\x20Ai团队账号验证','decorate','registerSendModel3Count','buyCramiAddress','\x27,\x20\x27','1164752bSzHUw','510717tmKqmV','connection','Yi\x20Ai','123456','defineProperty','10983AqXdTp','hashSync','map','INSERT\x20INTO\x20config\x20(configKey,\x20configVal,\x20public,\x20encry)\x20VALUES\x20',']\x20==============>\x20请注意查阅','__esModule','5601492zdXVcs','object','INSERT\x20INTO\x20balance\x20(userId,\x20balance,\x20usesLeft,\x20paintCount)\x20VALUES\x20(\x27','typeorm','firstRregisterSendDrawMjCount','\x27,\x200,\x201000,\x20100)','baiduCode','https://api.openai.com',']、初始密码为[','baiduSiteId','public','query','\x0a####\x20YiAi\x20欢迎您\x0a\x20-\x20欢迎使用YiAi\x0a\x20-\x20初始管理员账号密码\x20\x20super\x20\x20123456\x20【前台后台登录都可以修改】\x0a\x20-\x20初始预览账号密码\x20\x20admin\x20\x20123456\x20【为后台查看账号\x20仅可查看部分非敏感数据】\x0a','registerSuccessEmailTeamName','log','invitedGuestSendModel3Count','encry','count','replace','__decorate','defaultAdmin@cooper.com','11034170HoDZkz','7306128JZFEjf','metadata','noticeInfo','500','10xEBssG','default@cooper.com','INSERT\x20INTO\x20users\x20(username,\x20password,\x20status,\x20email,\x20role)\x20VALUES\x20(\x27','baiduToken','invitedGuestSendModel4Count','初始化创建','createDefaultUser','Yi\x20Ai团队','firstRegisterSendRank','__metadata','inviteSendStatus','HttpException','insertId','vxNumber','configKey','805239273','Injectable','invitedGuestSendDrawMjCount','registerFailEmailTitle','2368MRFLKK','registerVerifyEmailFrom','Connection','registerSuccessEmailTitle','33DcQNSt','DatabaseService','inviteGiveSendDrawMjCount','Logger','INTERNAL_SERVER_ERROR','checkSiteBaseConfig','userDefautlAvatar','HelloWordYi819','function','registerVerifyEmailDesc','join','HttpStatus','error:\x20','registerVerifyEmailTitle','super','design:paramtypes','创建默认网站配置失败！','firstRregisterSendModel3Count','497956llKwiX','创建默认超级管理员失败！','checkSuperAdmin','用户成功、用户名为[','registerSendDrawMjCount','bcryptjs','qqNumber','初始化网站配置信息成功、如您需要修改网站配置信息，请前往管理系统系统配置设置\x20==============>\x20请注意查阅','admin','robotAvatar','createBaseSiteConfig','2eFJPSv'];_0x33e8=function(){return _0x211316;};return _0x33e8();}const common_1=require(_0x11ba66(0x17f)),typeorm_1=require(_0x11ba66(0x196)),bcrypt=require(_0x11ba66(0x1db));function _0x2a14(_0x3562e6,_0x53e931){const _0x33e882=_0x33e8();return _0x2a14=function(_0x2a1449,_0x461a1c){_0x2a1449=_0x2a1449-0x178;let _0x2915d0=_0x33e882[_0x2a1449];return _0x2915d0;},_0x2a14(_0x3562e6,_0x53e931);}let DatabaseService=class DatabaseService{constructor(_0x3cea7f){const _0x26a3c9=_0x11ba66;this[_0x26a3c9(0x189)]=_0x3cea7f;}async['onModuleInit'](){const _0x14f6ac=_0x11ba66;await this[_0x14f6ac(0x1d8)](),await this[_0x14f6ac(0x1c9)]();}async[_0x11ba66(0x1d8)](){const _0x618438=_0x11ba66,_0x5337dc=await this[_0x618438(0x189)][_0x618438(0x19e)]('SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27super\x27');if(!_0x5337dc||_0x5337dc[_0x618438(0x181)]===0x0){const _0x4b781c=bcrypt[_0x618438(0x18e)](_0x618438(0x18b),0xa),_0x22943a=bcrypt[_0x618438(0x18e)](_0x618438(0x18b),0xa),_0x55e243=_0x618438(0x1ae),_0x45065f=_0x618438(0x1a7),_0x3579ba={'username':'super','password':_0x4b781c,'status':0x1,'email':_0x55e243,'sex':0x1,'role':_0x618438(0x1d2)},_0x1a7bc1={'username':_0x618438(0x17a),'password':_0x22943a,'status':0x1,'email':_0x45065f,'sex':0x1,'role':'admin'};await this[_0x618438(0x1b3)](_0x3579ba),await this[_0x618438(0x1b3)](_0x1a7bc1);}}async['createDefaultUser'](_0x46cf07){const _0x46d261=_0x11ba66;try{const {username:_0x4683c9,password:_0x3288bf,status:_0x4aa344,email:_0x429629,role:_0x33d3e9}=_0x46cf07,_0x506aa4=await this[_0x46d261(0x189)][_0x46d261(0x19e)](_0x46d261(0x1af)+_0x4683c9+_0x46d261(0x186)+_0x3288bf+'\x27,\x20\x27'+_0x4aa344+_0x46d261(0x186)+_0x429629+_0x46d261(0x186)+_0x33d3e9+'\x27)'),_0x57bc8b=_0x506aa4[_0x46d261(0x1b9)],_0x153af3=await this[_0x46d261(0x189)]['query'](_0x46d261(0x195)+_0x57bc8b+_0x46d261(0x198));common_1['Logger'][_0x46d261(0x1a1)](_0x46d261(0x1b2)+_0x33d3e9+_0x46d261(0x1d9)+_0x4683c9+_0x46d261(0x19b)+(_0x4683c9===_0x46d261(0x1d2)?'nine-super':_0x46d261(0x18b))+_0x46d261(0x191),'DatabaseService');}catch(_0x8cbbe4){console['log']('error:\x20',_0x8cbbe4);throw new common_1[(_0x46d261(0x1b8))](_0x46d261(0x1d7),common_1[_0x46d261(0x1cf)][_0x46d261(0x1c8)]);}}async[_0x11ba66(0x1c9)](){const _0x57e4a5=_0x11ba66,_0x10e4b9=['siteName',_0x57e4a5(0x178),'vxNumber',_0x57e4a5(0x17b),_0x57e4a5(0x1ca)],_0xf87e35=await this[_0x57e4a5(0x189)]['query']('\x0a\x20\x20SELECT\x20COUNT(*)\x20AS\x20count\x20FROM\x20config\x20WHERE\x20`configKey`\x20IN\x20('+_0x10e4b9[_0x57e4a5(0x18f)](_0x242603=>'\x27'+_0x242603+'\x27')[_0x57e4a5(0x1ce)](',')+')\x0a'),_0x2361da=parseInt(_0xf87e35[0x0][_0x57e4a5(0x1a4)]);_0x2361da===0x0&&await this[_0x57e4a5(0x17c)]();}async[_0x11ba66(0x17c)](){const _0xd53feb=_0x11ba66;try{const _0x1c87b6='',_0x104db0=_0xd53feb(0x19f),_0x5cbf69=[{'configKey':'siteName','configVal':_0xd53feb(0x18a),'public':0x1,'encry':0x0},{'configKey':'qqNumber','configVal':_0xd53feb(0x1bc),'public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1ba),'configVal':_0xd53feb(0x1cb),'public':0x1,'encry':0x0},{'configKey':'robotAvatar','configVal':'','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1ca),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x199),'configVal':_0x1c87b6,'public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x19c),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x1b0),'configVal':'','public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x185),'configVal':'','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x17e),'configVal':_0xd53feb(0x19a),'public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x1ab),'configVal':_0x104db0,'public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1d1),'configVal':_0xd53feb(0x182),'public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x1cd),'configVal':'欢迎使用Yi\x20Ai团队的产品服务,请在五分钟内完成你的账号激活,点击以下按钮激活您的账号，','public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x1c1),'configVal':_0xd53feb(0x1b4),'public':0x0,'encry':0x0},{'configKey':'registerVerifyExpir','configVal':'1800','public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x1c3),'configVal':'Yi\x20Ai账号激活成功','public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x1a0),'configVal':'Yi\x20Ai','public':0x0,'encry':0x0},{'configKey':'registerSuccessEmaileAppend','configVal':',请妥善保管您的账号，祝您使用愉快','public':0x0,'encry':0x0},{'configKey':_0xd53feb(0x1bf),'configVal':'Yi\x20Ai账号激活失败','public':0x0,'encry':0x0},{'configKey':'registerFailEmailTeamName','configVal':_0xd53feb(0x1b4),'public':0x0,'encry':0x0},{'configKey':'registerSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x184),'configVal':'30','public':0x1,'encry':0x0},{'configKey':'registerSendModel4Count','configVal':'3','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1da),'configVal':'3','public':0x1,'encry':0x0},{'configKey':'firstRegisterSendStatus','configVal':'1','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1b5),'configVal':_0xd53feb(0x1ac),'public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1d5),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'firstRregisterSendModel4Count','configVal':'10','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x197),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1b7),'configVal':'1','public':0x1,'encry':0x0},{'configKey':'inviteGiveSendModel3Count','configVal':'0','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x180),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1c6),'configVal':'0','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1a2),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1b1),'configVal':'10','public':0x1,'encry':0x0},{'configKey':_0xd53feb(0x1be),'configVal':'10','public':0x1,'encry':0x0},{'configKey':'isVerifyEmail','configVal':'1','public':0x1,'encry':0x0}],_0x47dad5=await this[_0xd53feb(0x189)]['query'](_0xd53feb(0x190)+_0x5cbf69[_0xd53feb(0x18f)](_0x5303d5=>'(\x27'+_0x5303d5[_0xd53feb(0x1bb)]+'\x27,\x20\x27'+_0x5303d5['configVal'][_0xd53feb(0x1a5)](/'/g,'\x5c\x27')+'\x27,\x20\x27'+_0x5303d5[_0xd53feb(0x19d)]+_0xd53feb(0x186)+_0x5303d5[_0xd53feb(0x1a3)]+'\x27)')[_0xd53feb(0x1ce)](',\x20'));common_1[_0xd53feb(0x1c7)][_0xd53feb(0x1a1)](_0xd53feb(0x179),'DatabaseService');}catch(_0x30984d){console[_0xd53feb(0x1a1)](_0xd53feb(0x1d0),_0x30984d);throw new common_1[(_0xd53feb(0x1b8))](_0xd53feb(0x1d4),common_1[_0xd53feb(0x1cf)][_0xd53feb(0x1c8)]);}}};DatabaseService=__decorate([(0x0,common_1[_0x11ba66(0x1bd)])(),__metadata(_0x11ba66(0x1d3),[typeorm_1[_0x11ba66(0x1c2)]])],DatabaseService),exports[_0x11ba66(0x1c5)]=DatabaseService;