'use strict';var _0x5c544e=_0x21e0;(function(_0x46d54c,_0x51c3e2){var _0x392478=_0x21e0,_0x1756d6=_0x46d54c();while(!![]){try{var _0x30d077=-parseInt(_0x392478(0x20a))/0x1+parseInt(_0x392478(0x22c))/0x2*(-parseInt(_0x392478(0x1f9))/0x3)+-parseInt(_0x392478(0x202))/0x4+-parseInt(_0x392478(0x1ee))/0x5+parseInt(_0x392478(0x21d))/0x6*(-parseInt(_0x392478(0x229))/0x7)+-parseInt(_0x392478(0x20b))/0x8*(parseInt(_0x392478(0x212))/0x9)+-parseInt(_0x392478(0x205))/0xa*(-parseInt(_0x392478(0x216))/0xb);if(_0x30d077===_0x51c3e2)break;else _0x1756d6['push'](_0x1756d6['shift']());}catch(_0x55646b){_0x1756d6['push'](_0x1756d6['shift']());}}}(_0x1d08,0xb1470));function _0x21e0(_0x438e29,_0x3fad66){var _0x1d080f=_0x1d08();return _0x21e0=function(_0x21e085,_0x2ef07a){_0x21e085=_0x21e085-0x1ec;var _0x25645b=_0x1d080f[_0x21e085];return _0x25645b;},_0x21e0(_0x438e29,_0x3fad66);}function _0x1d08(){var _0x2bb106=['name','onQueueCleaned','509188HpiGhF','3492632MHhWUQ','Queue\x20cleaned:\x20','Processor','队列恢复的时候调用','OnQueueError','onQueueFailed','OnQueueCompleted','9lnlZtS','drawFailed','mjDraw','OnQueueFailed','121tnWqYx','onQueuePaused','MidjourneyService','length','QueueProcessor','draw','OnQueueDrained','5276274UDdSqT','__esModule','design:type','midjourneyService','prototype','Logger','onQueueError','OnQueueCleaned',':\x20绘画失败\x20','metadata','design:returntype','object','7hcTsEj','log','onQueueCompleted','2fDCINH','队列暂停的时候调用','队列发生错误','__metadata','MJDRAW','@nestjs/bull','5628110oroZqX','队列任务的一个回调用于通知当前进度','onQueueDrained','onQueueResumed','OnQueueProgress','onQueueProgress','CONCURRENCY','logger','function','OnQueuePaused','Queue\x20failed:\x20','3917457oGdFsV','\x20were\x20cleaned.','onQueueActive','handleJob','OnQueueActive','@nestjs/common','env','design:paramtypes','../midjourney/midjourney.service','4349748Xvnsbm','error','defineProperty','5518320boYEOn','message','data'];_0x1d08=function(){return _0x2bb106;};return _0x1d08();}var __decorate=this&&this['__decorate']||function(_0x52bb07,_0x480b45,_0x3b5b94,_0x4fd53d){var _0x435c9b=_0x21e0,_0x3f7cba=arguments[_0x435c9b(0x219)],_0x4adbfd=_0x3f7cba<0x3?_0x480b45:_0x4fd53d===null?_0x4fd53d=Object['getOwnPropertyDescriptor'](_0x480b45,_0x3b5b94):_0x4fd53d,_0x5d14ac;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x435c9b(0x1f6))_0x4adbfd=Reflect['decorate'](_0x52bb07,_0x480b45,_0x3b5b94,_0x4fd53d);else{for(var _0x412317=_0x52bb07[_0x435c9b(0x219)]-0x1;_0x412317>=0x0;_0x412317--)if(_0x5d14ac=_0x52bb07[_0x412317])_0x4adbfd=(_0x3f7cba<0x3?_0x5d14ac(_0x4adbfd):_0x3f7cba>0x3?_0x5d14ac(_0x480b45,_0x3b5b94,_0x4adbfd):_0x5d14ac(_0x480b45,_0x3b5b94))||_0x4adbfd;}return _0x3f7cba>0x3&&_0x4adbfd&&Object['defineProperty'](_0x480b45,_0x3b5b94,_0x4adbfd),_0x4adbfd;},__metadata=this&&this[_0x5c544e(0x22f)]||function(_0x34dce8,_0x559354){var _0x5791ad=_0x5c544e;if(typeof Reflect===_0x5791ad(0x228)&&typeof Reflect['metadata']===_0x5791ad(0x1f6))return Reflect[_0x5791ad(0x226)](_0x34dce8,_0x559354);},QueueProcessor_1;Object[_0x5c544e(0x204)](exports,_0x5c544e(0x21e),{'value':!![]}),exports[_0x5c544e(0x21a)]=void 0x0;const bull_1=require(_0x5c544e(0x1ed)),common_1=require(_0x5c544e(0x1fe)),midjourney_service_1=require(_0x5c544e(0x201));let QueueProcessor=QueueProcessor_1=class QueueProcessor{constructor(_0x2d971d){var _0x54b3d7=_0x5c544e;this['midjourneyService']=_0x2d971d,this[_0x54b3d7(0x1f5)]=new common_1['Logger'](QueueProcessor_1[_0x54b3d7(0x208)]);}async['handleJob'](_0xa2fcc0){var _0x51cd3c=_0x5c544e;const _0x2667ea=await this[_0x51cd3c(0x220)][_0x51cd3c(0x21b)](_0xa2fcc0['data'],_0xa2fcc0['id']);return _0x2667ea;}[_0x5c544e(0x1fb)](_0x6b30ee){}[_0x5c544e(0x223)](_0x4fe10a){var _0x13b811=_0x5c544e;console['log'](_0x13b811(0x22e),_0x4fe10a);}['onQueueProgress'](_0x5af588,_0x413c34){var _0x1e8b6f=_0x5c544e;console[_0x1e8b6f(0x22a)](_0x1e8b6f(0x1ef),_0x5af588['id'],_0x413c34);}[_0x5c544e(0x22b)](_0x31f758,_0xf39281){}[_0x5c544e(0x210)](_0x151b35,_0xb92f3b){var _0x3ca5f2=_0x5c544e;common_1[_0x3ca5f2(0x222)][_0x3ca5f2(0x203)](_0x3ca5f2(0x1f8)+_0xb92f3b[_0x3ca5f2(0x206)]+_0x3ca5f2(0x225)+_0x151b35['id'],_0x3ca5f2(0x21a)),this[_0x3ca5f2(0x220)][_0x3ca5f2(0x213)](_0x151b35[_0x3ca5f2(0x207)]);}[_0x5c544e(0x217)](){var _0x2d167a=_0x5c544e;console[_0x2d167a(0x22a)](_0x2d167a(0x22d));}[_0x5c544e(0x1f1)](){var _0x4bb5e4=_0x5c544e;console[_0x4bb5e4(0x22a)](_0x4bb5e4(0x20e));}[_0x5c544e(0x209)](_0x303002,_0x5bdb54){var _0x4f2db2=_0x5c544e;common_1['Logger'][_0x4f2db2(0x22a)](_0x4f2db2(0x20c)+_0x303002[_0x4f2db2(0x219)]+'\x20jobs\x20of\x20type\x20'+_0x5bdb54+_0x4f2db2(0x1fa),_0x4f2db2(0x21a));}[_0x5c544e(0x1f0)](){}};__decorate([(0x0,bull_1['Process'])({'name':_0x5c544e(0x214),'concurrency':process[_0x5c544e(0x1ff)][_0x5c544e(0x1f4)]?+process[_0x5c544e(0x1ff)][_0x5c544e(0x1f4)]:0x3}),__metadata(_0x5c544e(0x21f),Function),__metadata(_0x5c544e(0x200),[Object]),__metadata('design:returntype',Promise)],QueueProcessor[_0x5c544e(0x221)],_0x5c544e(0x1fc),null),__decorate([(0x0,bull_1[_0x5c544e(0x1fd)])(),__metadata('design:type',Function),__metadata(_0x5c544e(0x200),[Object]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],'onQueueActive',null),__decorate([(0x0,bull_1[_0x5c544e(0x20f)])(),__metadata('design:type',Function),__metadata(_0x5c544e(0x200),[Error]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],_0x5c544e(0x223),null),__decorate([(0x0,bull_1[_0x5c544e(0x1f2)])(),__metadata('design:type',Function),__metadata(_0x5c544e(0x200),[Object,Number]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],_0x5c544e(0x1f3),null),__decorate([(0x0,bull_1[_0x5c544e(0x211)])(),__metadata(_0x5c544e(0x21f),Function),__metadata(_0x5c544e(0x200),[Object,Object]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor['prototype'],_0x5c544e(0x22b),null),__decorate([(0x0,bull_1[_0x5c544e(0x215)])(),__metadata(_0x5c544e(0x21f),Function),__metadata(_0x5c544e(0x200),[Object,Error]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],_0x5c544e(0x210),null),__decorate([(0x0,bull_1[_0x5c544e(0x1f7)])(),__metadata(_0x5c544e(0x21f),Function),__metadata('design:paramtypes',[]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],_0x5c544e(0x217),null),__decorate([(0x0,bull_1['OnQueueResumed'])(),__metadata('design:type',Function),__metadata(_0x5c544e(0x200),[]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],'onQueueResumed',null),__decorate([(0x0,bull_1[_0x5c544e(0x224)])(),__metadata(_0x5c544e(0x21f),Function),__metadata('design:paramtypes',[Array,String]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],_0x5c544e(0x209),null),__decorate([(0x0,bull_1[_0x5c544e(0x21c)])(),__metadata('design:type',Function),__metadata(_0x5c544e(0x200),[]),__metadata(_0x5c544e(0x227),void 0x0)],QueueProcessor[_0x5c544e(0x221)],'onQueueDrained',null),QueueProcessor=QueueProcessor_1=__decorate([(0x0,bull_1[_0x5c544e(0x20d)])(_0x5c544e(0x1ec)),__metadata(_0x5c544e(0x200),[midjourney_service_1[_0x5c544e(0x218)]])],QueueProcessor),exports[_0x5c544e(0x21a)]=QueueProcessor;