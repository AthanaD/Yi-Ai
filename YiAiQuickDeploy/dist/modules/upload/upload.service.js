'use strict';function _0x3809(_0x1570e6,_0xbc71dc){const _0x775230=_0x7752();return _0x3809=function(_0x3809c6,_0x534584){_0x3809c6=_0x3809c6-0x177;let _0x2c48d0=_0x775230[_0x3809c6];return _0x2c48d0;},_0x3809(_0x1570e6,_0xbc71dc);}const _0x5d260e=_0x3809;(function(_0x1f4e37,_0x4360c3){const _0x8a79d4=_0x3809,_0x7f6790=_0x1f4e37();while(!![]){try{const _0x4834bc=parseInt(_0x8a79d4(0x19b))/0x1*(-parseInt(_0x8a79d4(0x1b7))/0x2)+parseInt(_0x8a79d4(0x1cd))/0x3+parseInt(_0x8a79d4(0x1d1))/0x4*(-parseInt(_0x8a79d4(0x1bb))/0x5)+-parseInt(_0x8a79d4(0x1d9))/0x6+parseInt(_0x8a79d4(0x1c5))/0x7*(-parseInt(_0x8a79d4(0x19e))/0x8)+parseInt(_0x8a79d4(0x199))/0x9*(parseInt(_0x8a79d4(0x1a8))/0xa)+parseInt(_0x8a79d4(0x178))/0xb*(parseInt(_0x8a79d4(0x17b))/0xc);if(_0x4834bc===_0x4360c3)break;else _0x7f6790['push'](_0x7f6790['shift']());}catch(_0x333e80){_0x7f6790['push'](_0x7f6790['shift']());}}}(_0x7752,0xcd55f));var __decorate=this&&this[_0x5d260e(0x17f)]||function(_0x589837,_0x1a7dec,_0x345618,_0x210df9){const _0x445784=_0x5d260e;var _0x401d7c=arguments['length'],_0x3c7d14=_0x401d7c<0x3?_0x1a7dec:_0x210df9===null?_0x210df9=Object[_0x445784(0x198)](_0x1a7dec,_0x345618):_0x210df9,_0x36fb24;if(typeof Reflect===_0x445784(0x185)&&typeof Reflect['decorate']===_0x445784(0x181))_0x3c7d14=Reflect['decorate'](_0x589837,_0x1a7dec,_0x345618,_0x210df9);else{for(var _0x801af9=_0x589837[_0x445784(0x1cb)]-0x1;_0x801af9>=0x0;_0x801af9--)if(_0x36fb24=_0x589837[_0x801af9])_0x3c7d14=(_0x401d7c<0x3?_0x36fb24(_0x3c7d14):_0x401d7c>0x3?_0x36fb24(_0x1a7dec,_0x345618,_0x3c7d14):_0x36fb24(_0x1a7dec,_0x345618))||_0x3c7d14;}return _0x401d7c>0x3&&_0x3c7d14&&Object['defineProperty'](_0x1a7dec,_0x345618,_0x3c7d14),_0x3c7d14;},__metadata=this&&this[_0x5d260e(0x195)]||function(_0x4317b5,_0x158a83){const _0x1bb8e5=_0x5d260e;if(typeof Reflect==='object'&&typeof Reflect[_0x1bb8e5(0x1e2)]==='function')return Reflect[_0x1bb8e5(0x1e2)](_0x4317b5,_0x158a83);};Object[_0x5d260e(0x1af)](exports,'__esModule',{'value':!![]}),exports[_0x5d260e(0x187)]=void 0x0;function _0x7752(){const _0x146c08=['design:paramtypes',',\x20阿里云:\x20','mjdev','uploadFileByTencentCos','cheveretoStatus','mjProxy','5030652Jdirrv','ali','../globalConfig/globalConfig.service','error','debug','uploadFile','mjtest.png','tencentCos','message','metadata','STANDARD','catch','1394371tCpPjm','HttpException','split','276jbqiJg','HttpStatus','url','put','__decorate','上传失败:\x20','function','https://$2','stream-to-buffer','createRandomUid','object','post','UploadService','res:\x20','ISDEV','获取图片资源失败、请重新试试吧！','test','form-data','getConfigs','getBufferFromUrl','uploadFileByAliOssFromUrl','get','uploadFileFromUrl','default','getUploadConfig','aliOssStatus','__metadata','error:\x20','cosBucket','getOwnPropertyDescriptor','36YiVbcH','uploadFileByChevereto','1OiMHHJ','上传图片失败[ten][url]','使用腾讯云COS上传','540888iDYNoz','removeSpecialCharacters','uploadFileByAliOss','BAD_REQUEST','status','tencentCosStatus','../../common/utils','axios','aliOssBucket','chevereto','5940CsQhPh','TODO->error:\x20\x20','globalConfigService','tencentCosAcceleratedDomain','slice','使用阿里云OSS上传','Logger','defineProperty','uploadFileByTencentCosFromUrl','tencent','使用Chevereto上传','uploadFileByCheveretoFromUrl','png','base64','source','390332MAilVb','log','上传图片失败[ten]','key','5cicmJa','append','code','mjProxyUrl','aliyun','@nestjs/common','GlobalConfigService','上传图片失败[Chevereto][url]','response','toString','98WoTNxT','上传配置状态\x20-\x20腾讯云:\x20','aliOssAccessKeyId','data','/mj/replaceUpload','endsWith','length','http://172.247.48.137:8000','4233243YuLFhd','cos\x20->\x20err:\x20','上传图片失败[ALI][url]','Location','6030972lwopaS','请先前往后台配置上传图片的方式'];_0x7752=function(){return _0x146c08;};return _0x7752();}const common_1=require(_0x5d260e(0x1c0)),TENCENTCOS=require('cos-nodejs-sdk-v5'),ALIOSS=require('ali-oss'),axios_1=require(_0x5d260e(0x1a5)),streamToBuffer=require(_0x5d260e(0x183)),utils_1=require(_0x5d260e(0x1a4)),globalConfig_service_1=require(_0x5d260e(0x1db)),FormData=require(_0x5d260e(0x18c));let UploadService=class UploadService{constructor(_0x28f522){this['globalConfigService']=_0x28f522;}['onModuleInit'](){}async[_0x5d260e(0x1de)](_0x4294fa){const _0x278da3=_0x5d260e,{filename:_0x48c9ec,originalname:_0x5849df,buffer:_0x78f2d7,dir:dir='ai',mimetype:_0x4f8f4f}=_0x4294fa,_0xbd5f96=_0x4f8f4f?_0x4f8f4f[_0x278da3(0x17a)]('/')[0x1]:'',_0x58031a=_0x5849df||_0x48c9ec;common_1[_0x278da3(0x1ae)]['debug']('准备上传文件:\x20'+_0x58031a+',\x20类型:\x20'+_0xbd5f96,_0x278da3(0x187));const {tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x278da3(0x1aa)][_0x278da3(0x18d)]([_0x278da3(0x1a3),_0x278da3(0x194),'cheveretoStatus']);common_1[_0x278da3(0x1ae)][_0x278da3(0x1dd)](_0x278da3(0x1c6)+tencentCosStatus+_0x278da3(0x1d4)+aliOssStatus+',\x20Chevereto:\x20'+cheveretoStatus,_0x278da3(0x187));if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1[(_0x278da3(0x179))](_0x278da3(0x1d2),common_1[_0x278da3(0x17c)][_0x278da3(0x1a1)]);try{if(Number(tencentCosStatus))return common_1[_0x278da3(0x1ae)]['debug'](_0x278da3(0x19d),_0x278da3(0x187)),await this[_0x278da3(0x1d6)]({'filename':_0x58031a,'buffer':_0x78f2d7,'dir':dir,'fileTyle':_0xbd5f96});if(Number(aliOssStatus))return common_1[_0x278da3(0x1ae)][_0x278da3(0x1dd)](_0x278da3(0x1ad),'UploadService'),await this[_0x278da3(0x1a0)]({'filename':_0x58031a,'buffer':_0x78f2d7,'dir':dir,'fileTyle':_0xbd5f96});if(Number(cheveretoStatus)){common_1['Logger']['debug'](_0x278da3(0x1b2),_0x278da3(0x187));const {filename:_0x44fc1f,buffer:_0x46dcb3,dir:_0x366e43}=_0x4294fa;return await this[_0x278da3(0x19a)]({'filename':_0x44fc1f,'buffer':_0x46dcb3[_0x278da3(0x1c4)](_0x278da3(0x1b5)),'dir':_0x366e43,'fileTyle':_0xbd5f96});}}catch(_0x4e4d08){common_1[_0x278da3(0x1ae)]['error'](_0x278da3(0x180)+_0x4e4d08[_0x278da3(0x1e1)],_0x278da3(0x187));throw _0x4e4d08;}}async['getUploadType'](){const _0x106d59=_0x5d260e,{tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this['globalConfigService'][_0x106d59(0x18d)]([_0x106d59(0x1a3),_0x106d59(0x194),_0x106d59(0x1d7)]);if(Number(tencentCosStatus))return _0x106d59(0x1b1);if(Number(aliOssStatus))return'ali';if(Number(cheveretoStatus))return _0x106d59(0x1a7);}async[_0x5d260e(0x191)]({filename:_0xeeb7fa,url:_0x1ca6de,dir:dir='mj'}){const _0x862c8f=_0x5d260e;dir=process['env'][_0x862c8f(0x189)]?_0x862c8f(0x1d5):dir;const {tencentCosStatus:tencentCosStatus=0x0,aliOssStatus:aliOssStatus=0x0,cheveretoStatus:cheveretoStatus=0x0}=await this[_0x862c8f(0x1aa)][_0x862c8f(0x18d)]([_0x862c8f(0x1a3),_0x862c8f(0x194),_0x862c8f(0x1d7)]);if(!Number(tencentCosStatus)&&!Number(aliOssStatus)&&!Number(cheveretoStatus))throw new common_1['HttpException']('请先前往后台配置上传图片的方式',common_1[_0x862c8f(0x17c)][_0x862c8f(0x1a1)]);if(Number(tencentCosStatus))return this['uploadFileByTencentCosFromUrl']({'filename':_0xeeb7fa,'url':_0x1ca6de,'dir':dir});if(Number(aliOssStatus)){const _0x1b4fe5=await this[_0x862c8f(0x18f)]({'filename':_0xeeb7fa,'url':_0x1ca6de,'dir':dir});return _0x1b4fe5;}if(Number(cheveretoStatus))return await this[_0x862c8f(0x1b3)]({'filename':_0xeeb7fa,'url':_0x1ca6de,'dir':dir});}async['uploadFileByTencentCos']({filename:_0xebe0e9,buffer:_0x388471,dir:_0xa34214,fileTyle:_0x27d98a}){const _0xca84f1=_0x5d260e,{Bucket:_0x13b451,Region:_0xd346bf,SecretId:_0x83db67,SecretKey:_0x1f40b6}=await this[_0xca84f1(0x193)](_0xca84f1(0x1b1));this[_0xca84f1(0x1e0)]=new TENCENTCOS({'SecretId':_0x83db67,'SecretKey':_0x1f40b6,'FileParallelLimit':0xa});try{return new Promise(async(_0x3dee23,_0x489770)=>{const _0x5029d2=_0xca84f1,_0x336992=_0x27d98a||'png';this[_0x5029d2(0x1e0)]['putObject']({'Bucket':(0x0,utils_1[_0x5029d2(0x19f)])(_0x13b451),'Region':(0x0,utils_1[_0x5029d2(0x19f)])(_0xd346bf),'Key':_0xa34214+'/'+(_0xebe0e9||(0x0,utils_1[_0x5029d2(0x184)])()+'.'+_0x27d98a),'StorageClass':_0x5029d2(0x1e3),'Body':_0x388471},async(_0xa592cc,_0xf6006f)=>{const _0x307cfb=_0x5029d2;if(_0xa592cc)return console[_0x307cfb(0x1b8)](_0x307cfb(0x1ce),_0xa592cc),_0x489770(_0xa592cc);let _0x2c9e91=_0xf6006f[_0x307cfb(0x1d0)]['replace'](/^(http:\/\/|https:\/\/|\/\/|)(.*)/,_0x307cfb(0x182));const {acceleratedDomain:_0x1b1a72}=await this[_0x307cfb(0x193)]('tencent');return _0x1b1a72&&(_0x2c9e91=_0x2c9e91['replace'](/^(https:\/\/[^/]+)(\/.*)$/,'https://'+_0x1b1a72+'$2'),console[_0x307cfb(0x1b8)]('当前已开启全球加速----------------->',_0x2c9e91)),_0x3dee23(_0x2c9e91);});});}catch(_0x4d801){console['log'](_0xca84f1(0x196),_0x4d801);throw new common_1['HttpException'](_0xca84f1(0x1b9),common_1[_0xca84f1(0x17c)][_0xca84f1(0x1a1)]);}}async[_0x5d260e(0x1b0)]({filename:_0x2ea2be,url:_0x1ca785,dir:_0x474838}){const _0x3b57b6=_0x5d260e,{Bucket:_0x72e0db,Region:_0x5bbd43,SecretId:_0x1d45ee,SecretKey:_0x4fef7e}=await this[_0x3b57b6(0x193)](_0x3b57b6(0x1b1));this[_0x3b57b6(0x1e0)]=new TENCENTCOS({'SecretId':_0x1d45ee,'SecretKey':_0x4fef7e,'FileParallelLimit':0xa});try{const _0x1d9e9a=await this['globalConfigService'][_0x3b57b6(0x18d)](['mjProxy'])||0x0,_0x2a234e=await this[_0x3b57b6(0x18e)](_0x1ca785);return await this[_0x3b57b6(0x1d6)]({'filename':_0x2ea2be,'buffer':_0x2a234e,'dir':_0x474838,'fileTyle':''});}catch(_0x3c7c09){console[_0x3b57b6(0x1b8)](_0x3b57b6(0x1a9),_0x3c7c09);throw new common_1[(_0x3b57b6(0x179))](_0x3b57b6(0x19c),common_1['HttpStatus'][_0x3b57b6(0x1a1)]);}}async['uploadFileByAliOss']({filename:_0x529bc5,buffer:_0x216d6a,dir:_0x49e3fd,fileTyle:fileTyle=_0x5d260e(0x1b4)}){const _0x48e72c=_0x5d260e,{region:_0x18811d,bucket:_0xde8a8e,accessKeyId:_0x2db0ac,accessKeySecret:_0x337737}=await this['getUploadConfig'](_0x48e72c(0x1da)),_0x1c0c8c=new ALIOSS({'region':(0x0,utils_1['removeSpecialCharacters'])(_0x18811d),'accessKeyId':_0x2db0ac,'accessKeySecret':_0x337737,'bucket':(0x0,utils_1[_0x48e72c(0x19f)])(_0xde8a8e)});try{return console[_0x48e72c(0x1b8)]('ali\x20开始上传'),new Promise((_0x22c6c8,_0x42a43c)=>{const _0x420ba8=_0x48e72c;_0x1c0c8c[_0x420ba8(0x17e)](_0x49e3fd+'/'+(_0x529bc5||(0x0,utils_1[_0x420ba8(0x184)])()+'.'+fileTyle),_0x216d6a)['then'](_0x446470=>{const _0x377ae9=_0x420ba8;_0x22c6c8(_0x446470[_0x377ae9(0x17d)]);})[_0x420ba8(0x177)](_0x4df866=>{_0x42a43c(_0x4df866);});});}catch(_0x4cdcd6){throw new common_1['HttpException']('上传图片失败[ali]',common_1[_0x48e72c(0x17c)]['BAD_REQUEST']);}}async[_0x5d260e(0x18f)]({filename:_0x451866,url:_0x3035b4,dir:_0x432451}){const _0x5d1b51=_0x5d260e,{region:_0x2ba1e8,bucket:_0x72d200,accessKeyId:_0x27a39d,accessKeySecret:_0x1b78eb}=await this[_0x5d1b51(0x193)](_0x5d1b51(0x1da)),_0x509669=new ALIOSS({'region':_0x2ba1e8,'accessKeyId':_0x27a39d,'accessKeySecret':_0x1b78eb,'bucket':_0x72d200});try{const _0x36d2f9=await this[_0x5d1b51(0x1aa)][_0x5d1b51(0x18d)]([_0x5d1b51(0x1d8)])||0x0;if(Number(_0x36d2f9)===0x1){const _0x48bac1={'url':_0x3035b4,'cosParams':{'region':_0x2ba1e8,'bucket':_0x72d200,'accessKeyId':_0x27a39d,'accessKeySecret':_0x1b78eb},'cosType':_0x5d1b51(0x1bf)},_0x3fca11=await this[_0x5d1b51(0x1aa)][_0x5d1b51(0x18d)]([_0x5d1b51(0x1be)])||'http://172.247.48.137:8000',_0xa12c1b=await axios_1[_0x5d1b51(0x192)][_0x5d1b51(0x186)](_0x3fca11+_0x5d1b51(0x1c9),_0x48bac1);if(!(_0xa12c1b===null||_0xa12c1b===void 0x0?void 0x0:_0xa12c1b[_0x5d1b51(0x1c8)]))throw new common_1['HttpException'](_0x5d1b51(0x1cf),common_1[_0x5d1b51(0x17c)][_0x5d1b51(0x1a1)]);return _0xa12c1b[_0x5d1b51(0x1c8)];}else{const _0x1e84b1=await this[_0x5d1b51(0x18e)](_0x3035b4);return await this['uploadFileByAliOss']({'filename':_0x451866,'buffer':_0x1e84b1,'dir':_0x432451});}}catch(_0x32e71b){throw new common_1[(_0x5d1b51(0x179))](_0x5d1b51(0x1cf),common_1[_0x5d1b51(0x17c)]['BAD_REQUEST']);}}async[_0x5d260e(0x19a)]({filename:filename='',buffer:_0x20a422,dir:dir='ai',fileTyle:fileTyle=_0x5d260e(0x1b4)}){const _0x103d4c=_0x5d260e;var _0x51b8b7;const {key:_0x3f5a55,uploadPath:_0x328e23}=await this[_0x103d4c(0x193)](_0x103d4c(0x1a7));let _0x410028=_0x328e23[_0x103d4c(0x1ca)]('/')?_0x328e23['slice'](0x0,-0x1):_0x328e23;const _0x9f65ba=new FormData();_0x9f65ba[_0x103d4c(0x1bc)](_0x103d4c(0x1b6),_0x20a422),_0x9f65ba[_0x103d4c(0x1bc)](_0x103d4c(0x1ba),_0x3f5a55);try{const _0x3d94ef=await axios_1[_0x103d4c(0x192)][_0x103d4c(0x186)](_0x410028,_0x9f65ba,{'headers':{'X-API-Key':_0x3f5a55}});if((_0x3d94ef===null||_0x3d94ef===void 0x0?void 0x0:_0x3d94ef[_0x103d4c(0x1a2)])===0xc8)return _0x3d94ef[_0x103d4c(0x1c8)]['image'][_0x103d4c(0x17d)];else console[_0x103d4c(0x1b8)]('Chevereto\x20--->\x20res',_0x3d94ef===null||_0x3d94ef===void 0x0?void 0x0:_0x3d94ef[_0x103d4c(0x1c8)][_0x103d4c(0x1bd)],_0x3d94ef===null||_0x3d94ef===void 0x0?void 0x0:_0x3d94ef[_0x103d4c(0x1c8)][_0x103d4c(0x1dc)][_0x103d4c(0x1e1)]),common_1['Logger'][_0x103d4c(0x1dc)]('上传图片失败[Chevereto]',JSON['stringify'](_0x3d94ef[_0x103d4c(0x1c8)]));}catch(_0x50b8e2){console[_0x103d4c(0x1b8)]('error:\x20',_0x50b8e2);throw new common_1[(_0x103d4c(0x179))]('上传图片失败[Chevereto|buffer]\x20-->\x20'+((_0x51b8b7=_0x50b8e2[_0x103d4c(0x1c3)])===null||_0x51b8b7===void 0x0?void 0x0:_0x51b8b7[_0x103d4c(0x1c8)][_0x103d4c(0x1dc)][_0x103d4c(0x1e1)]),common_1['HttpStatus'][_0x103d4c(0x1a1)]);}}async[_0x5d260e(0x1b3)]({filename:_0x2228b8,url:_0x1f4ad7,dir:_0x5c8bd3}){const _0x51baff=_0x5d260e;try{const _0x3db92e=await this['globalConfigService'][_0x51baff(0x18d)]([_0x51baff(0x1d8)])||0x0;if(Number(_0x3db92e)===0x1){const {key:_0x34205c,uploadPath:_0x1fdf50}=await this[_0x51baff(0x193)](_0x51baff(0x1a7));let _0x3bb2ea=_0x1fdf50[_0x51baff(0x1ca)]('/')?_0x1fdf50[_0x51baff(0x1ac)](0x0,-0x1):_0x1fdf50;const _0x311066={'cosType':_0x51baff(0x1a7),'url':_0x1f4ad7,'cosParams':{'key':_0x34205c,'uploadPath':_0x3bb2ea}},_0x2f210c=await this['globalConfigService'][_0x51baff(0x18d)](['mjProxyUrl'])||_0x51baff(0x1cc),_0x570bdc=await axios_1[_0x51baff(0x192)][_0x51baff(0x186)](_0x2f210c+_0x51baff(0x1c9),_0x311066);if(!_0x570bdc['data'])throw new common_1[(_0x51baff(0x179))](_0x51baff(0x1c2),common_1[_0x51baff(0x17c)][_0x51baff(0x1a1)]);return _0x570bdc[_0x51baff(0x1c8)];}else{const _0x32d5d4=await this[_0x51baff(0x18e)](_0x1f4ad7);return await this[_0x51baff(0x19a)]({'filename':_0x2228b8,'buffer':_0x32d5d4,'dir':_0x5c8bd3});}}catch(_0x371439){console[_0x51baff(0x1b8)](_0x51baff(0x196),_0x371439);throw new common_1['HttpException'](_0x371439[_0x51baff(0x1c3)],common_1[_0x51baff(0x17c)][_0x51baff(0x1a1)]);}}async['getUploadConfig'](_0x50d5fd){const _0x49ec0c=_0x5d260e;if(_0x50d5fd===_0x49ec0c(0x1da)){const {aliOssRegion:_0x2aef5f,aliOssBucket:_0x5b24f3,aliOssAccessKeyId:_0x3c1198,aliOssAccessKeySecret:_0x3c6057}=await this['globalConfigService'][_0x49ec0c(0x18d)](['aliOssRegion',_0x49ec0c(0x1a6),_0x49ec0c(0x1c7),'aliOssAccessKeySecret']);return{'region':_0x2aef5f,'bucket':_0x5b24f3,'accessKeyId':_0x3c1198,'accessKeySecret':_0x3c6057};}if(_0x50d5fd===_0x49ec0c(0x1b1)){const {cosBucket:_0x451140,cosRegion:_0x410792,cosSecretId:_0x4b27cc,cosSecretKey:_0x48c968,tencentCosAcceleratedDomain:_0x44c400}=await this[_0x49ec0c(0x1aa)][_0x49ec0c(0x18d)]([_0x49ec0c(0x197),'cosRegion','cosSecretId','cosSecretKey',_0x49ec0c(0x1ab)]);return{'Bucket':_0x451140,'Region':_0x410792,'SecretId':_0x4b27cc,'SecretKey':_0x48c968,'acceleratedDomain':_0x44c400};}if(_0x50d5fd==='chevereto'){const {cheveretoKey:_0x178cc2,cheveretoUploadPath:_0x1b01f6}=await this[_0x49ec0c(0x1aa)]['getConfigs'](['cheveretoKey','cheveretoUploadPath']);return{'key':_0x178cc2,'uploadPath':_0x1b01f6};}}async[_0x5d260e(0x18b)](){const _0x19c089=_0x5d260e,_0x10f377={'filename':_0x19c089(0x1df),'dir':'mj','url':'https://cdn.discordapp.com/attachments/1097409128491651135/1169910551275638855/snine_60b5c001b_A_young_girl_smiles_brightly_in_the_pure_blue_f_8a41fe5f-5101-4c1e-b948-a748a0583577.png?ex=65571f1b&is=6544aa1b&hm=b82f2d88224eb7942e24c63a8e519c7693de12a2b96daa0f327dfb8f691b1480&'},_0x3d370f=await this[_0x19c089(0x191)](_0x10f377);return console['log'](_0x19c089(0x188),_0x3d370f),_0x3d370f;}async['getBufferFromUrl'](_0x1be309){const _0x51567a=_0x5d260e,_0x69793d=await this[_0x51567a(0x1aa)]['getConfigs'](['mjProxy'])||0x0,_0x4daa42=await axios_1[_0x51567a(0x192)][_0x51567a(0x190)](_0x1be309,{'responseType':'stream'});return new Promise((_0x2c1b6f,_0x1313ef)=>{const _0x46a34d=_0x51567a;streamToBuffer(_0x4daa42[_0x46a34d(0x1c8)],(_0x1cd4bc,_0xfc3e28)=>{const _0x366268=_0x46a34d;if(_0x1cd4bc)throw new common_1['HttpException'](_0x366268(0x18a),common_1[_0x366268(0x17c)]['BAD_REQUEST']);else _0x2c1b6f(_0xfc3e28);});});}};UploadService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x5d260e(0x1d3),[globalConfig_service_1[_0x5d260e(0x1c1)]])],UploadService),exports[_0x5d260e(0x187)]=UploadService;